{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":56,"index":88}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  exports.useUpload = useUpload;\n  var _env2 = require(_dependencyMap[0], \"expo/virtual/env\");\n  var React = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _uploadClient = require(_dependencyMap[2], \"@uploadcare/upload-client\");\n  var _s = $RefreshSig$();\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  const client = new _uploadClient.UploadClient({\n    publicKey: _env2.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    _s();\n    const [loading, setLoading] = React.useState(false);\n    const upload = React.useCallback(async input => {\n      try {\n        setLoading(true);\n        let response;\n        if ('reactNativeAsset' in input && input.reactNativeAsset) {\n          if (input.reactNativeAsset.file) {\n            const formData = new FormData();\n            formData.append(\"file\", input.reactNativeAsset.file);\n            response = await fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              body: formData\n            });\n          } else {\n            const response = await fetch(\"/_create/api/upload/presign/\", {\n              method: 'POST'\n            });\n            const {\n              secureSignature,\n              secureExpire\n            } = await response.json();\n            const result = await client.uploadFile(input.reactNativeAsset, {\n              fileName: input.reactNativeAsset.name ?? input.reactNativeAsset.uri.split(\"/\").pop(),\n              contentType: input.reactNativeAsset.mimeType,\n              secureSignature,\n              secureExpire\n            });\n            return {\n              url: `${_env2.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n              mimeType: result.mimeType || null\n            };\n          }\n        } else if (\"url\" in input) {\n          response = await fetch(\"/_create/api/upload/\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              url: input.url\n            })\n          });\n        } else if (\"base64\" in input) {\n          response = await fetch(\"/_create/api/upload/\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              base64: input.base64\n            })\n          });\n        } else {\n          response = await fetch(\"/_create/api/upload/\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/octet-stream\"\n            },\n            body: input.buffer\n          });\n        }\n        if (!response.ok) {\n          if (response.status === 413) {\n            throw new Error(\"Upload failed: File too large.\");\n          }\n          throw new Error(\"Upload failed\");\n        }\n        const data = await response.json();\n        return {\n          url: data.url,\n          mimeType: data.mimeType || null\n        };\n      } catch (uploadError) {\n        if (uploadError instanceof Error) {\n          return {\n            error: uploadError.message\n          };\n        }\n        if (typeof uploadError === \"string\") {\n          return {\n            error: uploadError\n          };\n        }\n        return {\n          error: \"Upload failed\"\n        };\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = exports.default = useUpload;\n});","lineCount":113,"map":[[8,2,1,0],[8,6,1,0,"React"],[8,11,1,0],[8,14,1,0,"_interopRequireWildcard"],[8,37,1,0],[8,38,1,0,"require"],[8,45,1,0],[8,46,1,0,"_dependencyMap"],[8,60,1,0],[9,2,2,0],[9,6,2,0,"_uploadClient"],[9,19,2,0],[9,22,2,0,"require"],[9,29,2,0],[9,30,2,0,"_dependencyMap"],[9,44,2,0],[10,2,2,56],[10,6,2,56,"_s"],[10,8,2,56],[10,11,2,56,"$RefreshSig$"],[10,23,2,56],[11,2,2,56],[11,11,2,56,"_interopRequireWildcard"],[11,35,2,56,"e"],[11,36,2,56],[11,38,2,56,"t"],[11,39,2,56],[11,68,2,56,"WeakMap"],[11,75,2,56],[11,81,2,56,"r"],[11,82,2,56],[11,89,2,56,"WeakMap"],[11,96,2,56],[11,100,2,56,"n"],[11,101,2,56],[11,108,2,56,"WeakMap"],[11,115,2,56],[11,127,2,56,"_interopRequireWildcard"],[11,150,2,56],[11,162,2,56,"_interopRequireWildcard"],[11,163,2,56,"e"],[11,164,2,56],[11,166,2,56,"t"],[11,167,2,56],[11,176,2,56,"t"],[11,177,2,56],[11,181,2,56,"e"],[11,182,2,56],[11,186,2,56,"e"],[11,187,2,56],[11,188,2,56,"__esModule"],[11,198,2,56],[11,207,2,56,"e"],[11,208,2,56],[11,214,2,56,"o"],[11,215,2,56],[11,217,2,56,"i"],[11,218,2,56],[11,220,2,56,"f"],[11,221,2,56],[11,226,2,56,"__proto__"],[11,235,2,56],[11,243,2,56,"default"],[11,250,2,56],[11,252,2,56,"e"],[11,253,2,56],[11,270,2,56,"e"],[11,271,2,56],[11,294,2,56,"e"],[11,295,2,56],[11,320,2,56,"e"],[11,321,2,56],[11,330,2,56,"f"],[11,331,2,56],[11,337,2,56,"o"],[11,338,2,56],[11,341,2,56,"t"],[11,342,2,56],[11,345,2,56,"n"],[11,346,2,56],[11,349,2,56,"r"],[11,350,2,56],[11,358,2,56,"o"],[11,359,2,56],[11,360,2,56,"has"],[11,363,2,56],[11,364,2,56,"e"],[11,365,2,56],[11,375,2,56,"o"],[11,376,2,56],[11,377,2,56,"get"],[11,380,2,56],[11,381,2,56,"e"],[11,382,2,56],[11,385,2,56,"o"],[11,386,2,56],[11,387,2,56,"set"],[11,390,2,56],[11,391,2,56,"e"],[11,392,2,56],[11,394,2,56,"f"],[11,395,2,56],[11,411,2,56,"t"],[11,412,2,56],[11,416,2,56,"e"],[11,417,2,56],[11,433,2,56,"t"],[11,434,2,56],[11,441,2,56,"hasOwnProperty"],[11,455,2,56],[11,456,2,56,"call"],[11,460,2,56],[11,461,2,56,"e"],[11,462,2,56],[11,464,2,56,"t"],[11,465,2,56],[11,472,2,56,"i"],[11,473,2,56],[11,477,2,56,"o"],[11,478,2,56],[11,481,2,56,"Object"],[11,487,2,56],[11,488,2,56,"defineProperty"],[11,502,2,56],[11,507,2,56,"Object"],[11,513,2,56],[11,514,2,56,"getOwnPropertyDescriptor"],[11,538,2,56],[11,539,2,56,"e"],[11,540,2,56],[11,542,2,56,"t"],[11,543,2,56],[11,550,2,56,"i"],[11,551,2,56],[11,552,2,56,"get"],[11,555,2,56],[11,559,2,56,"i"],[11,560,2,56],[11,561,2,56,"set"],[11,564,2,56],[11,568,2,56,"o"],[11,569,2,56],[11,570,2,56,"f"],[11,571,2,56],[11,573,2,56,"t"],[11,574,2,56],[11,576,2,56,"i"],[11,577,2,56],[11,581,2,56,"f"],[11,582,2,56],[11,583,2,56,"t"],[11,584,2,56],[11,588,2,56,"e"],[11,589,2,56],[11,590,2,56,"t"],[11,591,2,56],[11,602,2,56,"f"],[11,603,2,56],[11,608,2,56,"e"],[11,609,2,56],[11,611,2,56,"t"],[11,612,2,56],[12,2,3,0],[12,8,3,6,"client"],[12,14,3,12],[12,17,3,15],[12,21,3,19,"UploadClient"],[12,47,3,31],[12,48,3,32],[13,4,3,34,"publicKey"],[13,13,3,43],[13,15,3,43,"_env2"],[13,20,3,43],[13,21,3,43,"env"],[13,24,3,43],[13,25,3,43,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[14,2,3,91],[14,3,3,92],[14,4,3,93],[15,2,5,0],[15,11,5,9,"useUpload"],[15,20,5,18,"useUpload"],[15,21,5,18],[15,23,5,21],[16,4,5,21,"_s"],[16,6,5,21],[17,4,6,2],[17,10,6,8],[17,11,6,9,"loading"],[17,18,6,16],[17,20,6,18,"setLoading"],[17,30,6,28],[17,31,6,29],[17,34,6,32,"React"],[17,39,6,37],[17,40,6,38,"useState"],[17,48,6,46],[17,49,6,47],[17,54,6,52],[17,55,6,53],[18,4,7,2],[18,10,7,8,"upload"],[18,16,7,14],[18,19,7,17,"React"],[18,24,7,22],[18,25,7,23,"useCallback"],[18,36,7,34],[18,37,7,35],[18,43,7,42,"input"],[18,48,7,47],[18,52,7,52],[19,6,8,4],[19,10,8,8],[20,8,9,6,"setLoading"],[20,18,9,16],[20,19,9,17],[20,23,9,21],[20,24,9,22],[21,8,10,6],[21,12,10,10,"response"],[21,20,10,18],[22,8,11,6],[22,12,11,10],[22,30,11,28],[22,34,11,32,"input"],[22,39,11,37],[22,43,11,41,"input"],[22,48,11,46],[22,49,11,47,"reactNativeAsset"],[22,65,11,63],[22,67,11,65],[23,10,12,8],[23,14,12,12,"input"],[23,19,12,17],[23,20,12,18,"reactNativeAsset"],[23,36,12,34],[23,37,12,35,"file"],[23,41,12,39],[23,43,12,41],[24,12,13,10],[24,18,13,16,"formData"],[24,26,13,24],[24,29,13,27],[24,33,13,31,"FormData"],[24,41,13,39],[24,42,13,40],[24,43,13,41],[25,12,14,10,"formData"],[25,20,14,18],[25,21,14,19,"append"],[25,27,14,25],[25,28,14,26],[25,34,14,32],[25,36,14,34,"input"],[25,41,14,39],[25,42,14,40,"reactNativeAsset"],[25,58,14,56],[25,59,14,57,"file"],[25,63,14,61],[25,64,14,62],[26,12,15,10,"response"],[26,20,15,18],[26,23,15,21],[26,29,15,27,"fetch"],[26,34,15,32],[26,35,15,33],[26,57,15,55],[26,59,15,57],[27,14,16,12,"method"],[27,20,16,18],[27,22,16,20],[27,28,16,26],[28,14,17,12,"body"],[28,18,17,16],[28,20,17,18,"formData"],[29,12,18,10],[29,13,18,11],[29,14,18,12],[30,10,19,8],[30,11,19,9],[30,17,19,15],[31,12,20,10],[31,18,20,16,"response"],[31,26,20,24],[31,29,20,27],[31,35,20,33,"fetch"],[31,40,20,38],[31,41,20,39],[31,71,20,69],[31,73,20,71],[32,14,21,12,"method"],[32,20,21,18],[32,22,21,20],[33,12,22,10],[33,13,22,11],[33,14,22,12],[34,12,23,10],[34,18,23,16],[35,14,23,18,"secureSignature"],[35,29,23,33],[36,14,23,35,"secureExpire"],[37,12,23,48],[37,13,23,49],[37,16,23,52],[37,22,23,58,"response"],[37,30,23,66],[37,31,23,67,"json"],[37,35,23,71],[37,36,23,72],[37,37,23,73],[38,12,24,10],[38,18,24,16,"result"],[38,24,24,22],[38,27,24,25],[38,33,24,31,"client"],[38,39,24,37],[38,40,24,38,"uploadFile"],[38,50,24,48],[38,51,24,49,"input"],[38,56,24,54],[38,57,24,55,"reactNativeAsset"],[38,73,24,71],[38,75,24,73],[39,14,25,12,"fileName"],[39,22,25,20],[39,24,25,22,"input"],[39,29,25,27],[39,30,25,28,"reactNativeAsset"],[39,46,25,44],[39,47,25,45,"name"],[39,51,25,49],[39,55,25,53,"input"],[39,60,25,58],[39,61,25,59,"reactNativeAsset"],[39,77,25,75],[39,78,25,76,"uri"],[39,81,25,79],[39,82,25,80,"split"],[39,87,25,85],[39,88,25,86],[39,91,25,89],[39,92,25,90],[39,93,25,91,"pop"],[39,96,25,94],[39,97,25,95],[39,98,25,96],[40,14,26,12,"contentType"],[40,25,26,23],[40,27,26,25,"input"],[40,32,26,30],[40,33,26,31,"reactNativeAsset"],[40,49,26,47],[40,50,26,48,"mimeType"],[40,58,26,56],[41,14,27,12,"secureSignature"],[41,29,27,27],[42,14,28,12,"secureExpire"],[43,12,29,10],[43,13,29,11],[43,14,29,12],[44,12,30,10],[44,19,30,17],[45,14,30,19,"url"],[45,17,30,22],[45,19,30,24],[45,22,30,24,"_env2"],[45,27,30,24],[45,28,30,24,"env"],[45,31,30,24],[45,32,30,24,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[45,72,30,24],[45,76,30,83,"result"],[45,82,30,89],[45,83,30,90,"uuid"],[45,87,30,94],[45,90,30,97],[46,14,30,99,"mimeType"],[46,22,30,107],[46,24,30,109,"result"],[46,30,30,115],[46,31,30,116,"mimeType"],[46,39,30,124],[46,43,30,128],[47,12,30,133],[47,13,30,134],[48,10,31,8],[49,8,32,6],[49,9,32,7],[49,15,32,13],[49,19,32,17],[49,24,32,22],[49,28,32,26,"input"],[49,33,32,31],[49,35,32,33],[50,10,33,8,"response"],[50,18,33,16],[50,21,33,19],[50,27,33,25,"fetch"],[50,32,33,30],[50,33,33,31],[50,55,33,53],[50,57,33,55],[51,12,34,10,"method"],[51,18,34,16],[51,20,34,18],[51,26,34,24],[52,12,35,10,"headers"],[52,19,35,17],[52,21,35,19],[53,14,36,12],[53,28,36,26],[53,30,36,28],[54,12,37,10],[54,13,37,11],[55,12,38,10,"body"],[55,16,38,14],[55,18,38,16,"JSON"],[55,22,38,20],[55,23,38,21,"stringify"],[55,32,38,30],[55,33,38,31],[56,14,38,33,"url"],[56,17,38,36],[56,19,38,38,"input"],[56,24,38,43],[56,25,38,44,"url"],[57,12,38,48],[57,13,38,49],[58,10,39,8],[58,11,39,9],[58,12,39,10],[59,8,40,6],[59,9,40,7],[59,15,40,13],[59,19,40,17],[59,27,40,25],[59,31,40,29,"input"],[59,36,40,34],[59,38,40,36],[60,10,41,8,"response"],[60,18,41,16],[60,21,41,19],[60,27,41,25,"fetch"],[60,32,41,30],[60,33,41,31],[60,55,41,53],[60,57,41,55],[61,12,42,10,"method"],[61,18,42,16],[61,20,42,18],[61,26,42,24],[62,12,43,10,"headers"],[62,19,43,17],[62,21,43,19],[63,14,44,12],[63,28,44,26],[63,30,44,28],[64,12,45,10],[64,13,45,11],[65,12,46,10,"body"],[65,16,46,14],[65,18,46,16,"JSON"],[65,22,46,20],[65,23,46,21,"stringify"],[65,32,46,30],[65,33,46,31],[66,14,46,33,"base64"],[66,20,46,39],[66,22,46,41,"input"],[66,27,46,46],[66,28,46,47,"base64"],[67,12,46,54],[67,13,46,55],[68,10,47,8],[68,11,47,9],[68,12,47,10],[69,8,48,6],[69,9,48,7],[69,15,48,13],[70,10,49,8,"response"],[70,18,49,16],[70,21,49,19],[70,27,49,25,"fetch"],[70,32,49,30],[70,33,49,31],[70,55,49,53],[70,57,49,55],[71,12,50,10,"method"],[71,18,50,16],[71,20,50,18],[71,26,50,24],[72,12,51,10,"headers"],[72,19,51,17],[72,21,51,19],[73,14,52,12],[73,28,52,26],[73,30,52,28],[74,12,53,10],[74,13,53,11],[75,12,54,10,"body"],[75,16,54,14],[75,18,54,16,"input"],[75,23,54,21],[75,24,54,22,"buffer"],[76,10,55,8],[76,11,55,9],[76,12,55,10],[77,8,56,6],[78,8,57,6],[78,12,57,10],[78,13,57,11,"response"],[78,21,57,19],[78,22,57,20,"ok"],[78,24,57,22],[78,26,57,24],[79,10,58,8],[79,14,58,12,"response"],[79,22,58,20],[79,23,58,21,"status"],[79,29,58,27],[79,34,58,32],[79,37,58,35],[79,39,58,37],[80,12,59,10],[80,18,59,16],[80,22,59,20,"Error"],[80,27,59,25],[80,28,59,26],[80,60,59,58],[80,61,59,59],[81,10,60,8],[82,10,61,8],[82,16,61,14],[82,20,61,18,"Error"],[82,25,61,23],[82,26,61,24],[82,41,61,39],[82,42,61,40],[83,8,62,6],[84,8,63,6],[84,14,63,12,"data"],[84,18,63,16],[84,21,63,19],[84,27,63,25,"response"],[84,35,63,33],[84,36,63,34,"json"],[84,40,63,38],[84,41,63,39],[84,42,63,40],[85,8,64,6],[85,15,64,13],[86,10,64,15,"url"],[86,13,64,18],[86,15,64,20,"data"],[86,19,64,24],[86,20,64,25,"url"],[86,23,64,28],[87,10,64,30,"mimeType"],[87,18,64,38],[87,20,64,40,"data"],[87,24,64,44],[87,25,64,45,"mimeType"],[87,33,64,53],[87,37,64,57],[88,8,64,62],[88,9,64,63],[89,6,65,4],[89,7,65,5],[89,8,65,6],[89,15,65,13,"uploadError"],[89,26,65,24],[89,28,65,26],[90,8,66,6],[90,12,66,10,"uploadError"],[90,23,66,21],[90,35,66,33,"Error"],[90,40,66,38],[90,42,66,40],[91,10,67,8],[91,17,67,15],[92,12,67,17,"error"],[92,17,67,22],[92,19,67,24,"uploadError"],[92,30,67,35],[92,31,67,36,"message"],[93,10,67,44],[93,11,67,45],[94,8,68,6],[95,8,69,6],[95,12,69,10],[95,19,69,17,"uploadError"],[95,30,69,28],[95,35,69,33],[95,43,69,41],[95,45,69,43],[96,10,70,8],[96,17,70,15],[97,12,70,17,"error"],[97,17,70,22],[97,19,70,24,"uploadError"],[98,10,70,36],[98,11,70,37],[99,8,71,6],[100,8,72,6],[100,15,72,13],[101,10,72,15,"error"],[101,15,72,20],[101,17,72,22],[102,8,72,38],[102,9,72,39],[103,6,73,4],[103,7,73,5],[103,16,73,14],[104,8,74,6,"setLoading"],[104,18,74,16],[104,19,74,17],[104,24,74,22],[104,25,74,23],[105,6,75,4],[106,4,76,2],[106,5,76,3],[106,7,76,5],[106,9,76,7],[106,10,76,8],[107,4,78,2],[107,11,78,9],[107,12,78,10,"upload"],[107,18,78,16],[107,20,78,18],[108,6,78,20,"loading"],[109,4,78,28],[109,5,78,29],[109,6,78,30],[110,2,79,0],[111,2,79,1,"_s"],[111,4,79,1],[111,5,5,9,"useUpload"],[111,14,5,18],[112,2,5,18],[112,6,5,18,"_default"],[112,14,5,18],[112,17,5,18,"exports"],[112,24,5,18],[112,25,5,18,"default"],[112,32,5,18],[112,35,82,15,"useUpload"],[112,44,82,24],[113,0,82,24],[113,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACI;mCCE;GDqE;CDG"}},"type":"js/module"}]}